<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<!-- 2019-11-14 Thu 23:08 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chargement et sélection de données en Java : élements de correction</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Bernard Hugueney" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Chargement et sélection de données en Java : élements de correction</h1>
<div id="table-of-contents">
<h2>Table des matières</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org13168c4">1. Modélisation</a></li>
<li><a href="#org53ed3e4">2. Implémentation</a>
<ul>
<li><a href="#orge72194b">2.1. Fonctionnalités de base</a>
<ul>
<li><a href="#org698b431">2.1.1. equals</a></li>
<li><a href="#org83eb97c">2.1.2. hashCode</a></li>
</ul>
</li>
<li><a href="#org08f72c6">2.2. Fonctionnalités demandées</a>
<ul>
<li><a href="#org7ea23e0">2.2.1. distance d'une commune à un point</a></li>
<li><a href="#org0e268f3">2.2.2. distance d'une commune à une autre</a></li>
<li><a href="#org4cdb9f5">2.2.3. commune la plus proche</a></li>
<li><a href="#org3d9af60">2.2.4. communes dans un rayon par rapport à un point</a></li>
<li><a href="#orge4092e8">2.2.5. Communes dans un rayon par rapport à un ensemble de points</a></li>
</ul>
</li>
<li><a href="#orgc27a697">2.3. Lecture des données</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org13168c4" class="outline-2">
<h2 id="org13168c4"><span class="section-number-2">1</span> Modélisation</h2>
<div class="outline-text-2" id="text-1">
<p>
La principale question est de décider comment on va représenter les coordonnées géographiques. Il y a trois possibilités (en plus du fait de choisir un type <code class="src src-java"><span style="color: #6434A3;">float</span></code> ou src_java[:exports code]{double] pour les latitudes et longitudes) :
</p>
<ul class="org-ul">
<li>les représenter juste par deux nombres distincts</li>
<li>les regrouper :
<ul class="org-ul">
<li>dans un tableau de deux cases</li>
<li>dans une classe dédiée (par exemple <code class="src src-java">GeoCoords</code>).</li>
</ul></li>
</ul>

<p>
Il s'agit de différents compromis entre facilité, simplicité et performance. Les problèmes posés par le fait de ne pas regrouper les coordonnées sont :
</p>
<ul class="org-ul">
<li>il faudra faire attention à l'ordre dans lequel on passe les
paramètres à chaque fois (même si l'IDE peut nous aider)</li>
<li>pour la méthode qui implémentera l'opération «trouver les communes
qui sont simultanément dans un rayon donnée d'un ensemble de points
quelconques repérés par leur latitude et longitude.», il ne sera pas
commode de passer ces points.</li>
</ul>

<p>
Un tableau de deux cases peut résoudre le problème, mais le
compilateur ne pourra pas vérifier que le tableau fait effectivement
deux cases. <b>ATTENTION !</b> Si l'on utilise un tableau comme attribut de
notre classe <code class="src src-java">City</code>, il faut se poser la
question de l'égalité et du hashage de tableaux (utiliser
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#equals-double:A-double:A-">Arrays.equals</a> et non le <code class="src src-java">equals</code> qui est <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#equals-java.lang.Object-">celui
de Object</a>, et <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#hashCode-double:A-">Arrays.hashCode</a> et non le <code class="src src-java">hashCode</code> qui est <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#hashCode--">celui de Object</a>).
</p>

<p>
On peut aussi se demander si l'on a besoin d'une classe pour modéliser
les ou les ensembles de communes. À priori, cela ne semble pas
nécessaire.
</p>
</div>
</div>


<div id="outline-container-org53ed3e4" class="outline-2">
<h2 id="org53ed3e4"><span class="section-number-2">2</span> Implémentation</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orge72194b" class="outline-3">
<h3 id="orge72194b"><span class="section-number-3">2.1</span> Fonctionnalités de base</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org698b431" class="outline-4">
<h4 id="org698b431"><span class="section-number-4">2.1.1</span> equals</h4>
</div>

<div id="outline-container-org83eb97c" class="outline-4">
<h4 id="org83eb97c"><span class="section-number-4">2.1.2</span> hashCode</h4>
</div>
</div>

<div id="outline-container-org08f72c6" class="outline-3">
<h3 id="org08f72c6"><span class="section-number-3">2.2</span> Fonctionnalités demandées</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Certaines opérations qui se réfèrent à une commune en particulier, on
les implémentera donc sous la forme de méthodes d'instance. Pour les
autres, on utilisera des méthodes de classe. Pour les ensembles de
communes acceptés en argument et retournés, on doit se demander le
type à utiliser. Pour le type acceptés, on voudra utiliser l'interface
la plus générique : <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html">Collection</a>. Pour les types retournés, on doit
décider si l'on veut supprimer les doublons et/ou si l'on veut pouvoir
faire efficacement des intersections. Dans ces cas, on utilisera des
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html">Set</a> (par exemple <a href="https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html">HashSet</a> si l'on a pas d'ordre à gérer). Sinon, on
pourra utiliser des <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html">ArrayList</a> qu'on pourra retourner en tant que <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html">List</a>,
voire <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html">Collection</a>. Retourner une  <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html">List</a> permet de faire plus de choses, mais 
</p>
</div>

<div id="outline-container-org7ea23e0" class="outline-4">
<h4 id="org7ea23e0"><span class="section-number-4">2.2.1</span> distance d'une commune à un point</h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">
<pre class="src src-java">    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">double</span> <span style="color: #006699;">distanceTo</span>(<span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">latitude</span>, <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">longitude</span>){
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">R</span>= 6371e3;
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">phi1</span>=Math.toRadians(<span style="color: #0000FF;">this</span>.latitude);
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">phi2</span>=Math.toRadians(latitude);
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">deltaPhi</span>=Math.toRadians(latitude- <span style="color: #0000FF;">this</span>.latitude);
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">deltaLambda</span>= Math.toRadians(longitude- <span style="color: #0000FF;">this</span>.longitude);
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">a</span>= Math.sin(deltaPhi/2) * Math.sin(deltaPhi/2) +
            Math.cos(phi1) * Math.cos(phi2) * Math.sin(deltaLambda/2) * Math.sin(deltaLambda/2);
        <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">c</span>= 2* Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        <span style="color: #0000FF;">return</span> R * c;
    }
</pre>
</div>
</div>
</div>
<div id="outline-container-org0e268f3" class="outline-4">
<h4 id="org0e268f3"><span class="section-number-4">2.2.2</span> distance d'une commune à une autre</h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">
<pre class="src src-java">    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">double</span> <span style="color: #006699;">distanceTo</span>(<span style="color: #6434A3;">City</span> <span style="color: #BA36A5;">other</span>){
        <span style="color: #0000FF;">return</span> distanceTo(other.latitude, other.longitude);
    }
</pre>
</div>
</div>
</div>

<div id="outline-container-org4cdb9f5" class="outline-4">
<h4 id="org4cdb9f5"><span class="section-number-4">2.2.3</span> commune la plus proche</h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
Il faut juste faire attention à ne pas retourner l'instance elle-même
qui est évidemment la plus proche à elle-même. Les questions à se poser sont :
</p>

<ul class="org-ul">
<li>quel est le type à utiliser pour l'ensemble des communes reçues en argument ?</li>
<li>est-ce qu'on veut retourner une instance qui serait égale à
l'instance de référence, si elle est présente dans l'ensemble reçu
en argument.</li>
<li>que retourner s'il n'y a pas de communes la plus proche ! (Ce qui
arrive si et seulement si l'ensemble de communes est vide ou ne
contient que des instances égales à la commune de référence).</li>
</ul>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #6434A3;">City</span> <span style="color: #006699;">closestCity</span>(<span style="color: #6434A3;">Collection</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #BA36A5;">cities</span>){
    <span style="color: #6434A3;">City</span> <span style="color: #BA36A5;">res</span> = <span style="color: #D0372D;">null</span>;
    <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">minDist</span> = <span style="color: #D0372D;">Double</span>.MAX_VALUE;
    <span style="color: #0000FF;">for</span>(<span style="color: #6434A3;">City</span> <span style="color: #BA36A5;">city</span> : cities){
        <span style="color: #0000FF;">if</span>( !equals(city) ){
            <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">d</span> = distanceTo(city);
            <span style="color: #0000FF;">if</span> (d &lt; <span style="color: #6434A3;">minDist</span>){
                minDist = d;
                res = city;
            }
        }
    }
    <span style="color: #0000FF;">return</span> res;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d9af60" class="outline-4">
<h4 id="org3d9af60"><span class="section-number-4">2.2.4</span> communes dans un rayon par rapport à un point</h4>
<div class="outline-text-4" id="text-2-2-4">
<p>
Comme on retourne 
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">List</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #006699;">inRadius</span>(<span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">radius</span>, <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">latitude</span>, <span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">longitude</span>, <span style="color: #6434A3;">Collection</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #BA36A5;">cities</span>){
    <span style="color: #6434A3;">List</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #BA36A5;">res</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span>&lt;<span style="color: #6434A3;">City</span>&gt;();
    <span style="color: #0000FF;">for</span>(<span style="color: #6434A3;">City</span> <span style="color: #BA36A5;">city</span> : cities){
        <span style="color: #0000FF;">if</span>(city.distanceTo(latitude, longitude) &lt;= radius){
            res.add(city);
        }
    }
    <span style="color: #0000FF;">return</span> res;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge4092e8" class="outline-4">
<h4 id="orge4092e8"><span class="section-number-4">2.2.5</span> Communes dans un rayon par rapport à un ensemble de points</h4>
<div class="outline-text-4" id="text-2-2-5">
<p>
Si l'on a pas utilisé de classe dédiée (i.e. <code class="src src-java">GeoCoords</code>) ou de tableau pour regrouper les latitude et
longitude, on doit se poser la question du type utilisé pour recevoir
les coordonnées en argument. On ne voudra pas avoir deux tableaux
<code class="src src-java"><span style="color: #6434A3;">double</span>[] <span style="color: #BA36A5;">latitudes</span></code> et <code class="src src-java"><span style="color: #6434A3;">double</span>[] <span style="color: #BA36A5;">longitudes</span></code>. Il faut aussi décider de la valeur
retournée lorsque l'ensemble de points est vide. On pourrait aussi
bien décider de retourner une liste vide qu'une liste contenant toutes
les communes passées en argument.
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">List</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #006699;">inRadius</span>(<span style="color: #6434A3;">double</span> <span style="color: #BA36A5;">radius</span>, <span style="color: #6434A3;">Collection</span>&lt;<span style="color: #6434A3;">double</span>[]&gt; <span style="color: #BA36A5;">points</span>, <span style="color: #6434A3;">Collection</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #BA36A5;">cities</span>){
    <span style="color: #6434A3;">List</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #BA36A5;">res</span>= <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span>&lt;<span style="color: #6434A3;">City</span>&gt;(cities);
    <span style="color: #0000FF;">for</span>(<span style="color: #6434A3;">double</span>[] <span style="color: #BA36A5;">p</span> : points){
        res= inRadius(radius, p[0], p[1], res);
    }
    <span style="color: #0000FF;">return</span> res;
}       
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc27a697" class="outline-3">
<h3 id="orgc27a697"><span class="section-number-3">2.3</span> Lecture des données</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">List</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #006699;">read</span>(<span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">citiesURL</span>) <span style="color: #0000FF;">throws</span> <span style="color: #6434A3;">IOException</span> {
    <span style="color: #6434A3;">List</span>&lt;<span style="color: #6434A3;">City</span>&gt; <span style="color: #BA36A5;">res</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span>&lt;<span style="color: #6434A3;">City</span>&gt;();
    <span style="color: #6434A3;">URL</span> <span style="color: #BA36A5;">url</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">URL</span>(citiesURL);
    <span style="color: #0000FF;">try</span>(<span style="color: #6434A3;">BufferedReader</span> <span style="color: #BA36A5;">br</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">BufferedReader</span>(<span style="color: #0000FF;">new</span> <span style="color: #6434A3;">InputStreamReader</span>(url.openStream()))){
        br.readLine(); <span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">on passe la ligne d'ent&#234;te</span>
        <span style="color: #0000FF;">for</span>(<span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">line</span> = br.readLine(); line != <span style="color: #D0372D;">null</span>; line = br.readLine()){
            <span style="color: #6434A3;">String</span>[] <span style="color: #BA36A5;">data</span> = line.split(<span style="color: #008000;">";"</span>);
            <span style="color: #0000FF;">if</span>(data.length == 3){
                <span style="color: #0000FF;">try</span>{
                    res.add(<span style="color: #0000FF;">new</span> <span style="color: #6434A3;">City</span>(data[0], Double.parseDouble(data[1]), Double.parseDouble(data[2])));
                }<span style="color: #0000FF;">catch</span>(<span style="color: #6434A3;">Exception</span> <span style="color: #BA36A5;">e</span>){
                    System.err.println(<span style="color: #008000;">"Erreur &#224; la lecture de la ligne:\n"</span>+line);
                    System.err.println(e);
                }
            }
        }
    }
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Auteur: Bernard Hugueney</p>
<p class="date">Created: 2019-11-14 Thu 23:08</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
